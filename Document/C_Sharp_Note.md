# C# 学习笔记

## 命名规则

### 常用方法

- 常用的命名方法有两种，一种是 Pascal 命名法（帕斯卡命名法），另一种是 Camel 命名法（驼峰命名法）
- Pascal 命名法是指每个单词的首字母大写；Camel 命名法是指第一个单词小写，从第二个单词开始每个单词的首字母大写

### 命名

变量名

- 变量的命名规则遵循 Camel 命名法，例如：studentName
- 全局变量：gSystemCounter
- 局部变量：lMainTimer

常量的命名

- 全部大写，类似宏定义
- 常量： PIR_SET_TIME_SEC_5

类的命名

- 类的命名规则遵循 Pascal 命名法，例如：Student

接口的命名

- 接口的命名规则遵循 Pascal 命名法，通常用 I 开头
- 例如：ICompare

方法的命名

- 方法的命名规则遵循 Pascal 命名法，一般采用动词来命名
- 例如： AddUser

参考类：Program.cs

## C# 类和对象

### C# 类的定义（class）

- 类的访问修饰符：用于设定对类的访问限制，包括 public、internal 或者不写，用 internal 或者不写时代表只能在当前项目中访问类；public 则代表可以在任何项目中访问类。
- 修饰符：修饰符是对类本身特点的描述，包括 abstract、sealed 和 static。abstract 是抽象的意思，使用它修饰符的类不能被实例化；sealed 修饰的类是密封类，不能 被继承；static 修饰的类是静态类，不能被实例化。
- 类名：类名用于描述类的功能，因此在定义类名时最好是具有实际意义，这样方便用户理解类中描述的内容。在同一个命名空间下类名必须是唯一的。
- 类的成员：在类中能定义的元素，主要包括字段、属性、方法。
- 一个命名空间中也可以定义多个类；但不建议使用这种方式，最好是每一个文件定义一个类

### C# 访问修饰符、修饰符

- 类的访问修饰符有 2 个：public， internal；
- 类的成员包括字段，属性，方法； 访问修饰符有 4 个： public， private， internal， protected；

> - public： 成员可以被任何代码访问。
> - private： 成员仅能被同一个类中的代码访问，如果在类成员前未使用任何访问修饰符，则默认为private。
> - internal： 成员仅能被同一个项目中的代码访问。
> - protected： 成员只能由类或派生类中的代码访问。

字段的定义

- 字段不是变量或常量
- 变量定义：数据类型  变量名
- 常量定义：const 数据类型 常量名 = 值;
- 字段定义：访问修饰符  修饰符  数据类型  字段名；

修饰符

- 字段的修饰符：readonly（只读），static（静态的）
- readonly：只读，不能赋值
- static：静态字段，可以直接通过类名访问该字段
- 需要注意的是常量不能使用 static 修饰符修饰。

参考类：Test.cs

### C# 方法的定义

```
访问修饰符    修饰符    返回值类型    方法名(参数列表)
{
    语句块;
}
```

- 访问修饰符：和类成员访问修饰符相同
- 修饰符：包括 virtual（虚拟的）、abstract（抽象的）、override（重写的）、static（静态的）、sealed（密封的）
- 返回值类型：和 C 语言一样
- 方法名：以 Pascal 命名规范
- 参数列表：（数据类型 参数名，数据类型 参数名）

参考类：Compute.cs

### C# get 和 set

属性与字段：属性是通过get和set访问器对字段进行访问，保证了字段的安全性

定义属性：

```
public    数据类型    属性名
{
    get
    {
        获取属性的语句块;
        return 值;
    }
    set
    {
        设置属性得到语句块;
    }
}
```

- get 访问器：获取属性值， 可以省略
- set 访问器：设置属性值， 可以省略
- 属性命名使用Pascal命名法；由于属性都是针对某个字段赋值，因此属性名应该和字段名一致
  - 例如： name 的字段，属性名则为 Name；

属性定义简化写法：

- 自动属性设置

```
public    数据类型    属性名{get;set;}
```

- 可以省略set访问器：public int Id{get;}=1;
- 可以将属性私有化：public int Id{private get; set;}
- 可以界面快速生成属性
  - “编辑”一“重构” 一 “封装字段”
  - 右击——“快速操作和重构”——“封装字段”

什么时候使用字段，什么时候使用属性？

- 字段定义为私有的，属性定义为公有的
- 属性会把字段封装成 get 和 set
- 外部可以访问属性，但不能访问字段，保证了字段的安全性
- 对 name 字段赋予不合法的名字，将会抛出异常

参考类：Book.cs, Book1.cs

### C# 调用类成员

- 创建类的对象: Book b = new Book();
- 调用类中的成员：b.PrintMsg(); b.Id = 1; b.Name = "计算机基础";
  - 注意只可以调用 public 修饰的成员
  - b.Id 是属性，包含get和set访问器，是公有访问修饰符
- 一般属性的设置用一个方法传参数 SetBook

static 修饰的类成员

- 如果使用 static 修饰的，访问方式是“类名.类成员”： Book.SetBook();
- 如果一个方法使用 static 修饰，该方法只能直接访问静态类成员
- 非静态成员通过类的对象调用才能访问

参考类：Book1.cs

### C# 构造函数

构造方法：创建类的对象 “类名 对象名 = new 类名()” 实际上就是调用了类的构造方法；

- 构造方法的名字和类的名称相同
- 如果类中没有定义构造方法，系统会自动生成一个构造方法，该构造方法不包含参数

```
访问修饰符  类名 (参数列表)
{
    语句块；
}
```

- 构造方法通常使用 public 访问修饰符
- 如果使用 private 修饰构造方法，就无法创建该类的对象
- 通常在创建类的时候，使用构造方法初始化类中成员
- this 表示当前类的对象

参考类：User.cs

### C# 析构函数

析构方法：是在垃圾回收，释放资源时使用的；

```
~类名()
{
    语句块；
}
```

- 程序员无法调用析构函数，析构函数由垃圾回收器决定是否调用
- 如果类有析构函数系统会调用，如果没有系统会自动判断
- 也可以强制回收，但大多数情况下可以不用这样做

参考类：User.cs

### C# 方法重载

方法重载：方法名称相同、参数列表不同。

- 一个类，可以有多个构造函数，可以初始化不同的参数，这是方法重载
- 方法重载主要是：参数列表不容，参数个数，或参数数据类型不同

参考类：SumUtils.cs

### C# 方法的参数 - 引用参数和输出参数

C# 含有引用参数和输出参数，用于保存传递的数据修改后的值

参考网址：https://www.cnblogs.com/dyf96966/p/5483411.html

- 形参：Add(int a,int b) a 和 b 是形式参数
- 实参：实际传递的值 Add(3,4) 参数 3 和 4 即为实际参数
- 正常值参数：函数内对参数操作，在函数执行完毕后，数据丢失，不会作用到实际参数
- 引用参数：相当于传递的指针，即传递的参数在函数内的修改会作用到实际的参数
  - 形参和实参都要用 ref 修饰
  - 由于传递的可变的值，所以，函数必须使用变量值，常量不能使用
  - 必须使用初始化过的变量
- 输出参数：也是传递的指针，在函数执行完毕后将值从传递返回给实际使用的变量
  - 形参和实参都要用 out 修饰
  - 需要传递变量
  - 不要求一定要初始化，赋值后使用
  - 使用赋值后的输出参数，调用函数后，存储在该变量之前的值会丢失，保存最后的赋值

注意事项：

- 输出参数，常用在一个方法需要返回多个数据的情况
- 未赋值的变量用作 ref 参数是非法的， 用作 out 是合法的

参考类：RefOutClass.cs

### C# lambda 表达式

Lambda表达式：是一个匿名函数，是一种高效的类似于函数式编程的表达式

- 简化了匿名委托的使用
- 减少了编写的代码量
- 这种形式只能用在方法中只有一条语句的情况下，方便方法的书写

```
访问修饰符    修饰符    返回值类型    方法名(参数列表) => 表达式;
```

参考类：LambdaClass.cs

### C# 递归

递归：用方法调用自身

列子：实现 5 的阶乘

参考类：FactorialClass.cs

### C# 嵌套类

嵌套类：在类中定义的类

- 因为是在类中，所以，嵌套类是类中的成员，使用类成员的访问修饰符合和修饰符
- 在访问嵌套类中的成员时，必须加上外层类的名称

```
外部类.嵌套类
外部类.嵌套类.静态成员
```

参考类：OuterClass.cs

### C# 部分类

部分类：用于表示一个类中的一部分

```
访问修饰符   修饰符   partial class   类名{……}
```

- 把一个类拆分成多个不同的块，每个块就是部分类
- 部分类可以分布在不同的类中
- 部分类也有访问修饰符，修饰符
- 部分类的名称必须相同
- 部分类使用方法和正常的类使用方法一致

部分方法：使用不多，了解即可；实现的方式是在一个部分类中定义一个没有方法体的方法，在另一个部分类中完成方法体的内容

参考类：OuterClass.cs; LambdaClass.cs; Course.cs
